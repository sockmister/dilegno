<div class="heading">
  <h1>Your News</h1>
</div>

<!-- create a form for categories-->
<div>
	<legend> Add a new news item </legend> 
<%= form_for @news, :url => { :action => "create" }, :html => { :multipart => true, :enctype => "multipart/form-data" } do |f| %>

  <%= f.label :title %>
  <%= f.text_field :title %>

  <%= f.label :image, "News Images" %>
  <div class="image_manage span9">
    <p><button type="button" class="btn btn-default" id="add_image">Add Image</button></p>
  </div>
  <br>

  <%= f.label :content %>
  <%= f.cktext_area :content %>

</br>
  <%= f.submit "Add news", :class => "btn btn-primary"%>
  <%= link_to "Cancel", {:controller => "news", :action => "index"}, :class => "btn btn-primary"  %>
<% end %>

</div>

<script>

  var numOfImages = 0;
  $('#add_image').click(function(){
    var form = "&lt;div class=&quot;whole_fileupload&quot; style=&quot;float:left&quot;&gt; <br/>  &lt;div class=&quot;fileupload fileupload-new&quot; data-provides=&quot;fileupload&quot;&gt;      <br/>    &lt;div class=&quot;fileupload-preview thumbnail&quot; style=&quot;width: 200px; height: 200px;&quot;&gt;&lt;/div&gt;      <br/>    &lt;div&gt;<br/>      &lt;span class=&quot;btn btn-file&quot;&gt;<br/>        &lt;span class=&quot;fileupload-new&quot;&gt;Select image&lt;/span&gt;<br/>        &lt;span class=&quot;fileupload-exists&quot;&gt;Change&lt;/span&gt;<br/>        &lt;input type=&quot;file&quot; id=&quot;featured_image_image&quot; name=&quot;dilegno_image[image" + numOfImages;
    form = form + "][image]&quot;&gt;<br/>      &lt;/span&gt;<br/>      &lt;button type=&quot;button&quot; class=&quot;btn btn-default remove_image&quot;&gt;Remove&lt;/button&gt;      <br/>    &lt;/div&gt;    <br/>  &lt;/div&gt;  <br/>&lt;/div&gt;";
    form = $("<div />").html(form).text();
    numOfImages = numOfImages + 1;

    $(".image_manage").append(form);
  });

  $('body').delegate('.remove_image', 'click', function() {
    $(this).closest('.whole_fileupload').remove();
  });
</script>
